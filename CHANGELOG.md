# CHANGELOG

## [v1.4.0] - 2025-05-18

### 💡 気づきと思考の流れ

- React の状態遷移の理解を深める目的で、タイトル画面とゲーム画面を切り替える設計を導入。
- さらにプレイ体験を拡張するため、「1人プレイ（CPU）」と「2人プレイ」のモードを追加。
- 実装後の動作確認中に、「タイトルに戻る」ボタンがゲーム画面で表示されていない問題に気づく。
  - 実は表示はされていたが、UIの下部に押し出されて視認できなかったことが判明。
  - スタイル調整とDOM構造の整理により、確実に見えるように修正。

---

### ✨ 変更内容（実装ステップ）

#### ✅ プレイモード選択の導入
- `mode`（`'single'` / `'multi'`）という状態を新たに導入。
- タイトル画面でモード選択を行い、選択後に `setView('game')` でゲーム画面へ遷移。

#### ✅ CPUロジック（1人プレイ時）
- 人間（X）が手を置いたあと、O（CPU）がランダムな空マスを1つ選んで自動配置。
- `setTimeout` により、少し間をあけて応答する自然な振る舞いに。

#### ✅ 「タイトルに戻る」ボタンの配置修正
- ゲーム画面下部に常時表示されるようにしていたが、画面内で埋もれていたため、構造とスタイルを見直し。
- `resetButton` と同列に配置し、視認性と操作性を向上。

---

### 🧪 デバッグ過程と気づき

- 「タイトルに戻るボタンが表示されない」という問題が発覚。
- コード上には確かに存在しており、実際は**描画はされていたが視認されていなかった**。
- 要因：`styles.returnButton` により `marginTop` などが設定されていたが、前後のレイアウトとの関係で押し出されていた。
- 対処：ボタンの配置構造を整理し、`resetButton` の直下に配置することで解決。

---

### 🎯 次の改善候補

- CPUの強化（最善手探索ロジックの導入）
- スコア保存・連勝数のトラッキング
- プレイヤー名の入力・表示
- 勝敗決定後の演出（アニメーション、サウンドなど）

---


## 🧠 Reactの設計思想と状態管理の学び

### ✅ 状態とUIの明確な分離
Reactでは、UIを「状態の関数」として捉えることで、**状態が変わればUIが自動的に再描画される**という一貫性のある仕組みを提供している。  
このため、直接変数を書き換えるのではなく、`useState` などを通じて明示的に状態を管理する必要がある。

### ✅ useState の役割
`useState` は状態変数と、その更新用の関数（例: `setView`）のペアを返す。  
この関数を使うことで React は「状態が変わった」と感知し、必要なコンポーネントを再描画する。  
→ **ただの変数 = React は無視する  
→ `useState` 管理下の変数 = 自動再描画対象**

### ✅ 単方向データフロー（One-way Data Flow）
React は「状態 → UI」という方向にしかデータが流れない。  
このことで副作用を減らし、バグの温床になりやすい「DOMの直接操作」や「状態と表示の乖離」を防いでいる。

### ✅ 状態遷移による画面切り替え
`view` のように状態を定義し、条件分岐（`if (view === 'title')` など）によって**異なるUIを切り替える設計**は、状態駆動UIの典型例。  
状態が複雑になっても、すべての画面やコンポーネントの表示ロジックを「状態のみに依存」させることで、UIの予測可能性と保守性が高まる。

### ✅ Flux との関連
Flux は、React と親和性の高いアーキテクチャであり、「状態 → UI → アクション → 状態」という**明快な一方向データ循環**を明文化したモデル。  
状態の拡張や共有が必要になる場面では、Flux や Redux のような構造への移行も自然な流れである。

---

このように、React の思想は「UIは状態の反映である」という原則を軸に、コードをシンプルで再現可能なものに保とうとしている。


## [v1.3.0] - 2025-05-18

### 💡 気づきと思考の流れ

- 勝者が現れても、どのマスが揃ったのかが画面上からは分かりづらいと感じた。
- 「勝利ラインを強調表示する」ことで、プレイの決着が視覚的に伝わるようにしたい。
- `calculateWinner` 関数はこれまで勝者しか返していなかったが、3つ並んだ index 情報を付加すれば、UI 側で反映できると気づいた。

---

### ✨ 変更内容（差分の要点）

#### ✅ 勝者ライン情報の返却
- `calculateWinner` を拡張し、勝者だけでなく勝利した 3マスの index を含む `{ winner, line }` オブジェクトを返すように変更。

#### ✅ ハイライトの状態管理
- 勝利ラインの index を元に `highlightSquares` を構築し、各マスがハイライト対象かを判定。

#### ✅ Square コンポーネントの改修
- `highlight` prop を追加し、true の場合に `lightyellow` 背景色を付与。
- スタイル合成時に `...styles.highlight` を条件付きでマージ。

---

### 🎨 UI改善の効果

- 勝者のマスが視覚的に一目瞭然となり、対戦の決着が伝わりやすくなった。
- `X/O` の色分けに加えて背景色の演出も加わり、プレイ体験がよりリッチに。




## [v1.1.0] - 2025-05-18

### 💡 気づきと思考の流れ

- JSXに直接書いていた `<button>` を `<Square>` コンポーネントとして切り出した方が再利用しやすいことに気づいた。
- スタイルがベタ書きだと拡張に不向きなので、`styles` オブジェクトで管理した方がスッキリすると判断。
- スマホでの表示崩れを防ぐために、サイズを `px` から `vw` ベースに変更した。
- `flexWrap` はレイアウト崩れに強いが、今回のように「3×3 の固定構造」が重要な場面ではむしろ使わない方が良いと気づいた。

---

### ✨ 変更内容（段階的）

#### ✅ コンポーネント分離
- `<Square>` コンポーネントを新たに定義し、`value` と `onClick` を props 経由で受け取るように変更。
- これにより、JSX の重複コードが削減され、読みやすくなった。

#### ✅ スタイルの外部化
- `styles` オブジェクトを導入し、`container`, `boardRow`, `square`, `resetButton` にスタイルを整理。
- 今後のテーマ変更やデザイン調整が容易に。

#### ✅ レスポンシブ対応
- マスサイズに `20vw`, `maxWidth: 80px` 等を採用し、画面幅に応じてスケール。
- フォントサイズも `6vw` とし、スマホでも視認性を保つ設計に。

#### ✅ 無駄なスタイルを削除
- `flexWrap: 'wrap'` を `boardRow` から削除。
- マス目が折り返されると3×3構造が崩れるため、固定表示を優先。

---

### 🧪 次の改善候補

- 勝者のマスをハイライトする機能
- プレイ履歴（undo）の実装
- UIコンポーネントのファイル分割
- テーマ切り替え（ダークモードなど）

---




## 2025-05-18

### Added
- 最初の 〇× ゲーム（Tic Tac Toe） を実装
- `handleClick` や `calculateWinner` 関数でロジック構成
- React の状態管理（useState）を導入

### Changed
- ボタンの見た目を整えるために style オブジェクトを導入


### Refactored
- スタイルをベタ書きから `styles` オブジェクトにまとめて整理
- JSX の見通しがよくなった

### Next
- Square コンポーネントを別ファイルに分割
- 勝者マスのハイライト対応

